---
const { items } = Astro.props as { items: Array<{ src: string; alt?: string; caption?: string }>} ;
import inlineCarouselUrl from '../scripts/inlineCarousel.js?url';
const id = `ic-${Math.random().toString(36).slice(2, 8)}`;
---
<div id={id} data-inline-carousel class="group relative rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm overflow-hidden">
  <div class="relative">
    {items.map((img, i) => (
      <figure data-frame={i} data-caption={img.caption || ''} class={i === 0 ? 'block' : 'hidden'}>
        <img src={img.src} alt={img.alt || ''} loading="lazy" decoding="async" class="w-full h-auto block" />
      </figure>
    ))}
  </div>
  <div class="absolute inset-x-0 bottom-2 flex flex-col items-center justify-center">
    <div data-caption-el class="hidden text-[10px] md:text-xs text-[color:var(--textAlt)] mb-1.5 px-2 text-center bg-black/20 rounded-full border border-white/10"></div>
    <div class="flex items-center justify-center gap-2">
      {items.map((_, i) => (<button class="h-1.5 w-4 rounded-full bg-white/30 data-[active=true]:bg-[color:var(--accent)]" data-dot={i} aria-label={`Go to image ${i+1}`}></button>))}
    </div>
  </div>
  <button class="absolute left-1.5 top-1/2 -translate-y-1/2 btn btn-sm" data-prev aria-label="Previous">‹</button>
  <button class="absolute right-1.5 top-1/2 -translate-y-1/2 btn btn-sm" data-next aria-label="Next">›</button>
</div>
<script type="module" src={inlineCarouselUrl}></script>
